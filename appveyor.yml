version: 0.0.{build}

image: Visual Studio 2017
platform: x64

environment:
  matrix:
    - PLATFORM: x64
      GENERATOR: "Visual Studio 15 2017 Win64"
      CONFIGURATION: Debug

    - PLATFORM: x64
      GENERATOR: "Visual Studio 15 2017 Win64"
      CONFIGURATION: Release

install:
  - cmd: git submodule update --init --recursive

build_script:
  - cmd: cmake -G "%GENERATOR%" -DCMAKE_INSTALL_PREFIX:STRING=%APPVEYOR_BUILD_FOLDER%\install %APPVEYOR_BUILD_FOLDER%
  - cmd: cmake --build . --target fsim --config %CONFIGURATION%
  - cmd: cmake --build . --target install --config %CONFIGURATION%

artifacts:
- path: install
  name: fsim-$(appveyor_build_version)-%CONFIGURATION%
